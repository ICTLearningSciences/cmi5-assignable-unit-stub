/*
Government Purpose Rights (“GPR”)
Contract No.  W911NF-14-D-0005
Contractor Name:   University of Southern California
Contractor Address:  3720 S. Flower Street, 3rd Floor, Los Angeles, CA 90089-0001
Expiration Date:  Restrictions do not expire, GPR is perpetual
Restrictions Notice/Marking: The Government's rights to use, modify, reproduce, release, perform, display, or disclose this software are restricted by paragraph (b)(2) of the Rights in Noncommercial Computer Software and Noncommercial Computer Software Documentation clause contained in the above identified contract.  No restrictions apply after the expiration date shown above. Any reproduction of the software or portions thereof marked with this legend must also reproduce the markings. (see: DFARS 252.227-7014(f)(2)) 

No Commercial Use: This software shall be used for government purposes only and shall not, without the express written permission of the party whose name appears in the restrictive legend, be used, modified, reproduced, released, performed, or displayed for any commercial purpose or disclosed to a person other than subcontractors, suppliers, or prospective subcontractors or suppliers, who require the software to submit offers for, or perform, government contracts.  Prior to disclosing the software, the Contractor shall require the persons to whom disclosure will be made to complete and sign the non-disclosure agreement at 227.7103-7.  (see DFARS 252.227-7025(b)(2))
*/
(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{blRb:function(t,e,n){(function(e){var i,r,o,s,a,l=l||function(t,e){var n={},i=n.lib={},r=function(){},o=i.Base={extend:function(t){r.prototype=this;var e=new r;return t&&e.mixIn(t),e.hasOwnProperty("init")||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},s=i.WordArray=o.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:4*t.length},toString:function(t){return(t||l).stringify(this)},concat:function(t){var e=this.words,n=t.words,i=this.sigBytes;if(t=t.sigBytes,this.clamp(),i%4)for(var r=0;r<t;r++)e[i+r>>>2]|=(n[r>>>2]>>>24-r%4*8&255)<<24-(i+r)%4*8;else if(65535<n.length)for(r=0;r<t;r+=4)e[i+r>>>2]=n[r>>>2];else e.push.apply(e,n);return this.sigBytes+=t,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-n%4*8,e.length=t.ceil(n/4)},clone:function(){var t=o.clone.call(this);return t.words=this.words.slice(0),t},random:function(e){for(var n=[],i=0;i<e;i+=4)n.push(4294967296*t.random()|0);return new s.init(n,e)}}),a=n.enc={},l=a.Hex={stringify:function(t){var e=t.words;t=t.sigBytes;for(var n=[],i=0;i<t;i++){var r=e[i>>>2]>>>24-i%4*8&255;n.push((r>>>4).toString(16)),n.push((15&r).toString(16))}return n.join("")},parse:function(t){for(var e=t.length,n=[],i=0;i<e;i+=2)n[i>>>3]|=parseInt(t.substr(i,2),16)<<24-i%8*4;return new s.init(n,e/2)}},c=a.Latin1={stringify:function(t){var e=t.words;t=t.sigBytes;for(var n=[],i=0;i<t;i++)n.push(String.fromCharCode(e[i>>>2]>>>24-i%4*8&255));return n.join("")},parse:function(t){for(var e=t.length,n=[],i=0;i<e;i++)n[i>>>2]|=(255&t.charCodeAt(i))<<24-i%4*8;return new s.init(n,e)}},h=a.Utf8={stringify:function(t){try{return decodeURIComponent(escape(c.stringify(t)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(t){return c.parse(unescape(encodeURIComponent(t)))}},u=i.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=h.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var n=this._data,i=n.words,r=n.sigBytes,o=this.blockSize,a=r/(4*o);if(e=(a=e?t.ceil(a):t.max((0|a)-this._minBufferSize,0))*o,r=t.min(4*e,r),e){for(var l=0;l<e;l+=o)this._doProcessBlock(i,l);l=i.splice(0,e),n.sigBytes-=r}return new s.init(l,r)},clone:function(){var t=o.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0});i.Hasher=u.extend({cfg:o.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){u.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new p.HMAC.init(t,n).finalize(e)}}});var p=n.algo={};return n}(Math);r=(a=(i=l).lib).WordArray,o=a.Hasher,s=[],a=i.algo.SHA1=o.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var n=this._hash.words,i=n[0],r=n[1],o=n[2],a=n[3],l=n[4],c=0;80>c;c++){if(16>c)s[c]=0|t[e+c];else{var h=s[c-3]^s[c-8]^s[c-14]^s[c-16];s[c]=h<<1|h>>>31}h=(i<<5|i>>>27)+l+s[c],h=20>c?h+(1518500249+(r&o|~r&a)):40>c?h+(1859775393+(r^o^a)):60>c?h+((r&o|r&a|o&a)-1894007588):h+((r^o^a)-899497514),l=a,a=o,o=r<<30|r>>>2,r=i,i=h}n[0]=n[0]+i|0,n[1]=n[1]+r|0,n[2]=n[2]+o|0,n[3]=n[3]+a|0,n[4]=n[4]+l|0},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,i=8*t.sigBytes;return e[i>>>5]|=128<<24-i%32,e[14+(i+64>>>9<<4)]=Math.floor(n/4294967296),e[15+(i+64>>>9<<4)]=n,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=o.clone.call(this);return t._hash=this._hash.clone(),t}}),i.SHA1=o._createHelper(a),i.HmacSHA1=o._createHmacHelper(a);var c,h,u;l=l||function(t,e){var n={},i=n.lib={},r=function(){},o=i.Base={extend:function(t){r.prototype=this;var e=new r;return t&&e.mixIn(t),e.hasOwnProperty("init")||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},s=i.WordArray=o.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:4*t.length},toString:function(t){return(t||l).stringify(this)},concat:function(t){var e=this.words,n=t.words,i=this.sigBytes;if(t=t.sigBytes,this.clamp(),i%4)for(var r=0;r<t;r++)e[i+r>>>2]|=(n[r>>>2]>>>24-r%4*8&255)<<24-(i+r)%4*8;else if(65535<n.length)for(r=0;r<t;r+=4)e[i+r>>>2]=n[r>>>2];else e.push.apply(e,n);return this.sigBytes+=t,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-n%4*8,e.length=t.ceil(n/4)},clone:function(){var t=o.clone.call(this);return t.words=this.words.slice(0),t},random:function(e){for(var n=[],i=0;i<e;i+=4)n.push(4294967296*t.random()|0);return new s.init(n,e)}}),a=n.enc={},l=a.Hex={stringify:function(t){var e=t.words;t=t.sigBytes;for(var n=[],i=0;i<t;i++){var r=e[i>>>2]>>>24-i%4*8&255;n.push((r>>>4).toString(16)),n.push((15&r).toString(16))}return n.join("")},parse:function(t){for(var e=t.length,n=[],i=0;i<e;i+=2)n[i>>>3]|=parseInt(t.substr(i,2),16)<<24-i%8*4;return new s.init(n,e/2)}},c=a.Latin1={stringify:function(t){var e=t.words;t=t.sigBytes;for(var n=[],i=0;i<t;i++)n.push(String.fromCharCode(e[i>>>2]>>>24-i%4*8&255));return n.join("")},parse:function(t){for(var e=t.length,n=[],i=0;i<e;i++)n[i>>>2]|=(255&t.charCodeAt(i))<<24-i%4*8;return new s.init(n,e)}},h=a.Utf8={stringify:function(t){try{return decodeURIComponent(escape(c.stringify(t)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(t){return c.parse(unescape(encodeURIComponent(t)))}},u=i.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=h.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var n=this._data,i=n.words,r=n.sigBytes,o=this.blockSize,a=r/(4*o);if(e=(a=e?t.ceil(a):t.max((0|a)-this._minBufferSize,0))*o,r=t.min(4*e,r),e){for(var l=0;l<e;l+=o)this._doProcessBlock(i,l);l=i.splice(0,e),n.sigBytes-=r}return new s.init(l,r)},clone:function(){var t=o.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0});i.Hasher=u.extend({cfg:o.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){u.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new p.HMAC.init(t,n).finalize(e)}}});var p=n.algo={};return n}(Math);!function(t){for(var e=l,n=(r=e.lib).WordArray,i=r.Hasher,r=e.algo,o=[],s=[],a=function(t){return 4294967296*(t-(0|t))|0},c=2,h=0;64>h;){var u;t:{u=c;for(var p=t.sqrt(u),g=2;g<=p;g++)if(!(u%g)){u=!1;break t}u=!0}u&&(8>h&&(o[h]=a(t.pow(c,.5))),s[h]=a(t.pow(c,1/3)),h++),c++}var d=[];r=r.SHA256=i.extend({_doReset:function(){this._hash=new n.init(o.slice(0))},_doProcessBlock:function(t,e){for(var n=this._hash.words,i=n[0],r=n[1],o=n[2],a=n[3],l=n[4],c=n[5],h=n[6],u=n[7],p=0;64>p;p++){if(16>p)d[p]=0|t[e+p];else{var g=d[p-15],f=d[p-2];d[p]=((g<<25|g>>>7)^(g<<14|g>>>18)^g>>>3)+d[p-7]+((f<<15|f>>>17)^(f<<13|f>>>19)^f>>>10)+d[p-16]}g=u+((l<<26|l>>>6)^(l<<21|l>>>11)^(l<<7|l>>>25))+(l&c^~l&h)+s[p]+d[p],f=((i<<30|i>>>2)^(i<<19|i>>>13)^(i<<10|i>>>22))+(i&r^i&o^r&o),u=h,h=c,c=l,l=a+g|0,a=o,o=r,r=i,i=g+f|0}n[0]=n[0]+i|0,n[1]=n[1]+r|0,n[2]=n[2]+o|0,n[3]=n[3]+a|0,n[4]=n[4]+l|0,n[5]=n[5]+c|0,n[6]=n[6]+h|0,n[7]=n[7]+u|0},_doFinalize:function(){var e=this._data,n=e.words,i=8*this._nDataBytes,r=8*e.sigBytes;return n[r>>>5]|=128<<24-r%32,n[14+(r+64>>>9<<4)]=t.floor(i/4294967296),n[15+(r+64>>>9<<4)]=i,e.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var t=i.clone.call(this);return t._hash=this._hash.clone(),t}});e.SHA256=i._createHelper(r),e.HmacSHA256=i._createHmacHelper(r)}(Math),h=(c=l).lib.WordArray,c.enc.Base64={stringify:function(t){var e=t.words,n=t.sigBytes,i=this._map;t.clamp();for(var r=[],o=0;o<n;o+=3)for(var s=(e[o>>>2]>>>24-o%4*8&255)<<16|(e[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|e[o+2>>>2]>>>24-(o+2)%4*8&255,a=0;a<4&&o+.75*a<n;a++)r.push(i.charAt(s>>>6*(3-a)&63));var l=i.charAt(64);if(l)for(;r.length%4;)r.push(l);return r.join("")},parse:function(t){var e=t.length,n=this._map,i=n.charAt(64);if(i){var r=t.indexOf(i);-1!=r&&(e=r)}for(var o=[],s=0,a=0;a<e;a++)if(a%4){var l=n.indexOf(t.charAt(a-1))<<a%4*2,c=n.indexOf(t.charAt(a))>>>6-a%4*2;o[s>>>2]|=(l|c)<<24-s%4*8,s++}return h.create(o,s)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},function(){if("function"==typeof ArrayBuffer){var t=l.lib.WordArray,e=t.init;(t.init=function(t){if(t instanceof ArrayBuffer&&(t=new Uint8Array(t)),(t instanceof Int8Array||t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array)&&(t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)),t instanceof Uint8Array){for(var n=t.byteLength,i=[],r=0;r<n;r++)i[r>>>2]|=t[r]<<24-r%4*8;e.call(this,i,n)}else e.apply(this,arguments)}).prototype=t}}(),function(){"use strict";var e={statementId:!0,voidedStatementId:!0,verb:!0,object:!0,registration:!0,context:!0,actor:!0,since:!0,until:!0,limit:!0,authoritative:!0,sparse:!0,instructor:!0,ascending:!0,continueToken:!0,agent:!0,activityId:!0,stateId:!0,profileId:!0,activity_platform:!0,grouping:!0,"Accept-Language":!0};(u=function(t){this.log("constructor"),this.recordStores=[],this.actor=null,this.activity=null,this.registration=null,this.context=null,this.init(t)}).prototype={LOG_SRC:"TinCan",log:function(t,e){u.DEBUG&&"undefined"!=typeof console&&console.log&&(e=e||this.LOG_SRC||"TinCan",console.log("TinCan."+e+": "+t))},init:function(t){var e;if(this.log("init"),(t=t||{}).hasOwnProperty("url")&&""!==t.url&&this._initFromQueryString(t.url),t.hasOwnProperty("recordStores")&&void 0!==t.recordStores)for(e=0;e<t.recordStores.length;e+=1)this.addRecordStore(t.recordStores[e]);t.hasOwnProperty("activity")&&(t.activity instanceof u.Activity?this.activity=t.activity:this.activity=new u.Activity(t.activity)),t.hasOwnProperty("actor")&&(t.actor instanceof u.Agent?this.actor=t.actor:this.actor=new u.Agent(t.actor)),t.hasOwnProperty("context")&&(t.context instanceof u.Context?this.context=t.context:this.context=new u.Context(t.context)),t.hasOwnProperty("registration")&&(this.registration=t.registration)},_initFromQueryString:function(t){this.log("_initFromQueryString");var n,i,r,o=u.Utils.parseURL(t).params,s=["endpoint","auth"],a={},l=null;if(o.hasOwnProperty("actor")){this.log("_initFromQueryString - found actor: "+o.actor);try{this.actor=u.Agent.fromJSON(o.actor),delete o.actor}catch(c){this.log("_initFromQueryString - failed to set actor: "+c)}}if(o.hasOwnProperty("activity_id")&&(this.activity=new u.Activity({id:o.activity_id}),delete o.activity_id),(o.hasOwnProperty("activity_platform")||o.hasOwnProperty("registration")||o.hasOwnProperty("grouping"))&&(r={},o.hasOwnProperty("activity_platform")&&(r.platform=o.activity_platform,delete o.activity_platform),o.hasOwnProperty("registration")&&(r.registration=this.registration=o.registration,delete o.registration),o.hasOwnProperty("grouping")&&(r.contextActivities={},r.contextActivities.grouping=o.grouping,delete o.grouping),this.context=new u.Context(r)),o.hasOwnProperty("endpoint")){for(n=0;n<s.length;n+=1)i=s[n],o.hasOwnProperty(i)&&(a[i]=o[i],delete o[i]);for(n in o)o.hasOwnProperty(n)&&(e.hasOwnProperty(n)?delete o[n]:(l=l||{})[n]=o[n]);null!==l&&(a.extended=l),a.allowFail=!1,this.addRecordStore(a)}},addRecordStore:function(t){var e;this.log("addRecordStore"),e=t instanceof u.LRS?t:new u.LRS(t),this.recordStores.push(e)},prepareStatement:function(t){return this.log("prepareStatement"),t instanceof u.Statement||(t=new u.Statement(t)),null===t.actor&&null!==this.actor&&(t.actor=this.actor),null===t.target&&null!==this.activity&&(t.target=this.activity),null!==this.context&&(null===t.context?t.context=this.context:(null===t.context.registration&&(t.context.registration=this.context.registration),null===t.context.platform&&(t.context.platform=this.context.platform),null!==this.context.contextActivities&&(null===t.context.contextActivities?t.context.contextActivities=this.context.contextActivities:(null!==this.context.contextActivities.grouping&&null===t.context.contextActivities.grouping&&(t.context.contextActivities.grouping=this.context.contextActivities.grouping),null!==this.context.contextActivities.parent&&null===t.context.contextActivities.parent&&(t.context.contextActivities.parent=this.context.contextActivities.parent),null!==this.context.contextActivities.other&&null===t.context.contextActivities.other&&(t.context.contextActivities.other=this.context.contextActivities.other))))),t},sendStatement:function(t,e){this.log("sendStatement");var n,i,r,o=this,s=this.prepareStatement(t),a=this.recordStores.length,l=[],c=[];if(a>0)for("function"==typeof e&&(r=function(t,n){var i;o.log("sendStatement - callbackWrapper: "+a),a>1?(a-=1,c.push({err:t,xhr:n})):1===a?(c.push({err:t,xhr:n}),i=[c,s],e.apply(this,i)):o.log("sendStatement - unexpected record store count: "+a)}),i=0;i<a;i+=1)n=this.recordStores[i],l.push(n.saveStatement(s,{callback:r}));else this.log("[warning] sendStatement: No LRSs added yet (statement not sent)"),"function"==typeof e&&e.apply(this,[null,s]);return{statement:s,results:l}},getStatement:function(t,e,n){if(this.log("getStatement"),(n=n||{}).params=n.params||{},this.recordStores.length>0)return this.recordStores[0].retrieveStatement(t,{callback:e,params:n.params});this.log("[warning] getStatement: No LRSs added yet (statement not retrieved)")},voidStatement:function(t,e,n){this.log("voidStatement");var i,r,o,s,a,l=this,c=this.recordStores.length,h=[],p=[];if(t instanceof u.Statement&&(t=t.id),void 0!==n.actor?r=n.actor:null!==this.actor&&(r=this.actor),o=new u.Statement({actor:r,verb:{id:"http://adlnet.gov/expapi/verbs/voided"},target:{objectType:"StatementRef",id:t}}),c>0)for("function"==typeof e&&(a=function(t,n){var i;l.log("voidStatement - callbackWrapper: "+c),c>1?(c-=1,p.push({err:t,xhr:n})):1===c?(p.push({err:t,xhr:n}),i=[p,o],e.apply(this,i)):l.log("voidStatement - unexpected record store count: "+c)}),s=0;s<c;s+=1)i=this.recordStores[s],h.push(i.saveStatement(o,{callback:a}));else this.log("[warning] voidStatement: No LRSs added yet (statement not sent)"),"function"==typeof e&&e.apply(this,[null,o]);return{statement:o,results:h}},getVoidedStatement:function(t,e){if(this.log("getVoidedStatement"),this.recordStores.length>0)return this.recordStores[0].retrieveVoidedStatement(t,{callback:e});this.log("[warning] getVoidedStatement: No LRSs added yet (statement not retrieved)")},sendStatements:function(t,e){this.log("sendStatements");var n,i,r,o=this,s=[],a=this.recordStores.length,l=[],c=[];if(0===t.length)"function"==typeof e&&e.apply(this,[null,s]);else{for(i=0;i<t.length;i+=1)s.push(this.prepareStatement(t[i]));if(a>0)for("function"==typeof e&&(r=function(t,n){var i;o.log("sendStatements - callbackWrapper: "+a),a>1?(a-=1,c.push({err:t,xhr:n})):1===a?(c.push({err:t,xhr:n}),i=[c,s],e.apply(this,i)):o.log("sendStatements - unexpected record store count: "+a)}),i=0;i<a;i+=1)n=this.recordStores[i],l.push(n.saveStatements(s,{callback:r}));else this.log("[warning] sendStatements: No LRSs added yet (statements not sent)"),"function"==typeof e&&e.apply(this,[null,s])}return{statements:s,results:l}},getStatements:function(t){this.log("getStatements");var e,n,i={};if(this.recordStores.length>0)return e=this.recordStores[0],n=(t=t||{}).params||{},t.sendActor&&null!==this.actor&&("0.9"===e.version||"0.95"===e.version?n.actor=this.actor:n.agent=this.actor),t.sendActivity&&null!==this.activity&&("0.9"===e.version||"0.95"===e.version?n.target=this.activity:n.activity=this.activity),void 0===n.registration&&null!==this.registration&&(n.registration=this.registration),i={params:n},void 0!==t.callback&&(i.callback=t.callback),e.queryStatements(i);this.log("[warning] getStatements: No LRSs added yet (statements not read)")},getState:function(t,e){var n,i;if(this.log("getState"),this.recordStores.length>0)return i=this.recordStores[0],n={agent:void 0!==(e=e||{}).agent?e.agent:this.actor,activity:void 0!==e.activity?e.activity:this.activity},void 0!==e.registration?n.registration=e.registration:null!==this.registration&&(n.registration=this.registration),void 0!==e.callback&&(n.callback=e.callback),i.retrieveState(t,n);this.log("[warning] getState: No LRSs added yet (state not retrieved)")},setState:function(t,e,n){var i,r;if(this.log("setState"),this.recordStores.length>0)return r=this.recordStores[0],i={agent:void 0!==(n=n||{}).agent?n.agent:this.actor,activity:void 0!==n.activity?n.activity:this.activity},void 0!==n.registration?i.registration=n.registration:null!==this.registration&&(i.registration=this.registration),void 0!==n.lastSHA1&&(i.lastSHA1=n.lastSHA1),void 0!==n.contentType&&(i.contentType=n.contentType,void 0!==n.overwriteJSON&&!n.overwriteJSON&&u.Utils.isApplicationJSON(n.contentType)&&(i.method="POST")),void 0!==n.callback&&(i.callback=n.callback),r.saveState(t,e,i);this.log("[warning] setState: No LRSs added yet (state not saved)")},deleteState:function(t,e){var n,i;if(this.log("deleteState"),this.recordStores.length>0)return i=this.recordStores[0],n={agent:void 0!==(e=e||{}).agent?e.agent:this.actor,activity:void 0!==e.activity?e.activity:this.activity},void 0!==e.registration?n.registration=e.registration:null!==this.registration&&(n.registration=this.registration),void 0!==e.callback&&(n.callback=e.callback),i.dropState(t,n);this.log("[warning] deleteState: No LRSs added yet (state not deleted)")},getActivityProfile:function(t,e){var n,i;if(this.log("getActivityProfile"),this.recordStores.length>0)return i=this.recordStores[0],n={activity:void 0!==(e=e||{}).activity?e.activity:this.activity},void 0!==e.callback&&(n.callback=e.callback),i.retrieveActivityProfile(t,n);this.log("[warning] getActivityProfile: No LRSs added yet (activity profile not retrieved)")},setActivityProfile:function(t,e,n){var i,r;if(this.log("setActivityProfile"),this.recordStores.length>0)return r=this.recordStores[0],i={activity:void 0!==(n=n||{}).activity?n.activity:this.activity},void 0!==n.callback&&(i.callback=n.callback),void 0!==n.lastSHA1&&(i.lastSHA1=n.lastSHA1),void 0!==n.contentType&&(i.contentType=n.contentType,void 0!==n.overwriteJSON&&!n.overwriteJSON&&u.Utils.isApplicationJSON(n.contentType)&&(i.method="POST")),r.saveActivityProfile(t,e,i);this.log("[warning] setActivityProfile: No LRSs added yet (activity profile not saved)")},deleteActivityProfile:function(t,e){var n,i;if(this.log("deleteActivityProfile"),this.recordStores.length>0)return i=this.recordStores[0],n={activity:void 0!==(e=e||{}).activity?e.activity:this.activity},void 0!==e.callback&&(n.callback=e.callback),i.dropActivityProfile(t,n);this.log("[warning] deleteActivityProfile: No LRSs added yet (activity profile not deleted)")},getAgentProfile:function(t,e){var n,i;if(this.log("getAgentProfile"),this.recordStores.length>0)return i=this.recordStores[0],n={agent:void 0!==(e=e||{}).agent?e.agent:this.actor},void 0!==e.callback&&(n.callback=e.callback),i.retrieveAgentProfile(t,n);this.log("[warning] getAgentProfile: No LRSs added yet (agent profile not retrieved)")},setAgentProfile:function(t,e,n){var i,r;if(this.log("setAgentProfile"),this.recordStores.length>0)return r=this.recordStores[0],i={agent:void 0!==(n=n||{}).agent?n.agent:this.actor},void 0!==n.callback&&(i.callback=n.callback),void 0!==n.lastSHA1&&(i.lastSHA1=n.lastSHA1),void 0!==n.contentType&&(i.contentType=n.contentType,void 0!==n.overwriteJSON&&!n.overwriteJSON&&u.Utils.isApplicationJSON(n.contentType)&&(i.method="POST")),r.saveAgentProfile(t,e,i);this.log("[warning] setAgentProfile: No LRSs added yet (agent profile not saved)")},deleteAgentProfile:function(t,e){var n,i;if(this.log("deleteAgentProfile"),this.recordStores.length>0)return i=this.recordStores[0],n={agent:void 0!==(e=e||{}).agent?e.agent:this.actor},void 0!==e.callback&&(n.callback=e.callback),i.dropAgentProfile(t,n);this.log("[warning] deleteAgentProfile: No LRSs added yet (agent profile not deleted)")}},u.DEBUG=!1,u.enableDebug=function(){u.DEBUG=!0},u.disableDebug=function(){u.DEBUG=!1},u.versions=function(){return["1.0.2","1.0.1","1.0.0","0.95","0.9"]},t.exports=u}(),function(){"use strict";u.Utils={defaultEncoding:"utf8",getUUID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)}))},getISODateString:function(t){function e(t,e){var n,i;for(null==t&&(t=0),null==e&&(e=2),n=Math.pow(10,e-1),i=t.toString();t<n&&n>1;)i="0"+i,n/=10;return i}return t.getUTCFullYear()+"-"+e(t.getUTCMonth()+1)+"-"+e(t.getUTCDate())+"T"+e(t.getUTCHours())+":"+e(t.getUTCMinutes())+":"+e(t.getUTCSeconds())+"."+e(t.getUTCMilliseconds(),3)+"Z"},convertISO8601DurationToMilliseconds:function(t){var e,n,i,r,o=t.indexOf("-")>=0,s=t.indexOf("T"),a=t.indexOf("H"),l=t.indexOf("M"),c=t.indexOf("S");if(-1===s||-1!==l&&l<s||-1!==t.indexOf("D")||-1!==t.indexOf("Y"))throw new Error("ISO 8601 timestamps including years, months and/or days are not currently supported");return-1===a?(a=s,e=0):e=parseInt(t.slice(s+1,a),10),-1===l?(l=s,n=0):n=parseInt(t.slice(a+1,l),10),i=parseFloat(t.slice(l+1,c)),r=parseInt(1e3*(60*(60*e+n)+i),10),isNaN(r)&&(r=0),o&&(r*=-1),r},convertMillisecondsToISO8601Duration:function(t){var e,n,i,r=parseInt(t,10),o="",s="";return(i=Math.round(r/10))<0&&(o="-",i*=-1),s=o+"PT",(e=parseInt(i/36e4,10))>0&&(s+=e+"H"),(n=parseInt(i%36e4/6e3,10))>0&&(s+=n+"M"),s+=i%36e4%6e3/100+"S"},getSHA1String:function(t){return l.SHA1(t).toString(l.enc.Hex)},getSHA256String:function(t){return"[object ArrayBuffer]"===Object.prototype.toString.call(t)&&(t=l.lib.WordArray.create(t)),l.SHA256(t).toString(l.enc.Hex)},getBase64String:function(t){return l.enc.Base64.stringify(l.enc.Latin1.parse(t))},getLangDictionaryValue:function(t,e){var n,i=this[t];if(void 0!==e&&void 0!==i[e])return i[e];if(void 0!==i.und)return i.und;if(void 0!==i["en-US"])return i["en-US"];for(n in i)if(i.hasOwnProperty(n))return i[n];return""},parseURL:function(t,e){var n,i,r,o,s="/"===t.charAt(0),a=["(/[^?#]*)","(\\?[^#]*|)","(#.*|)$"],l=/\+/g,c=/([^&=]+)=?([^&]*)/g,h=function(t){return decodeURIComponent(t.replace(l," "))};if(e=e||{},s){if(void 0===e.allowRelative||!e.allowRelative)throw new Error("Refusing to parse relative URL without 'allowRelative' option")}else a.unshift("^(https?:)//","(([^:/?#]*)(?::([0-9]+))?)"),-1===t.indexOf("/",8)&&(t+="/");if(n=new RegExp(a.join("")),null===(i=t.match(n)))throw new Error("Unable to parse URL regular expression did not match: '"+t+"'");if(s?(r={protocol:null,host:null,hostname:null,port:null,path:null,pathname:i[1],search:i[2],hash:i[3],params:{}}).path=r.pathname:(r={protocol:i[1],host:i[2],hostname:i[3],port:i[4],pathname:i[5],search:i[6],hash:i[7],params:{}}).path=r.protocol+"//"+r.host+r.pathname,""!==r.search)for(;o=c.exec(r.search.substring(1));)r.params[h(o[1])]=h(o[2]);return r},getServerRoot:function(t){var e=t.split("/");return e[0]+"//"+e[2]},getContentTypeFromHeader:function(t){return String(t).split(";")[0]},isApplicationJSON:function(t){return 0===u.Utils.getContentTypeFromHeader(t).toLowerCase().indexOf("application/json")},stringToArrayBuffer:function(){u.prototype.log("stringToArrayBuffer not overloaded - no environment loaded?")},stringFromArrayBuffer:function(){u.prototype.log("stringFromArrayBuffer not overloaded - no environment loaded?")}}}(),function(){"use strict";var t=u.LRS=function(t){this.log("constructor"),this.endpoint=null,this.version=null,this.auth=null,this.allowFail=!0,this.extended=null,this.init(t)};t.prototype={LOG_SRC:"LRS",log:u.prototype.log,init:function(t){this.log("init");var e,n=u.versions(),i=!1;if((t=t||{}).hasOwnProperty("alertOnRequestFailure")&&this.log("'alertOnRequestFailure' is deprecated (alerts have been removed) no need to set it now"),!t.hasOwnProperty("endpoint")||null===t.endpoint||""===t.endpoint)throw this.log("[error] LRS invalid: no endpoint"),{code:3,mesg:"LRS invalid: no endpoint"};if(this.endpoint=String(t.endpoint),"/"!==this.endpoint.slice(-1)&&(this.log("adding trailing slash to endpoint"),this.endpoint+="/"),t.hasOwnProperty("allowFail")&&(this.allowFail=t.allowFail),t.hasOwnProperty("auth")?this.auth=t.auth:t.hasOwnProperty("username")&&t.hasOwnProperty("password")&&(this.auth="Basic "+u.Utils.getBase64String(t.username+":"+t.password)),t.hasOwnProperty("extended")&&(this.extended=t.extended),this._initByEnvironment(t),void 0!==t.version){for(this.log("version: "+t.version),e=0;e<n.length;e+=1)if(n[e]===t.version){i=!0;break}if(!i)throw this.log("[error] LRS invalid: version not supported ("+t.version+")"),{code:5,mesg:"LRS invalid: version not supported ("+t.version+")"};this.version=t.version}else this.version=n[0]},_getBoundary:function(){return u.Utils.getUUID().replace(/-/g,"")},_initByEnvironment:function(){this.log("_initByEnvironment not overloaded - no environment loaded?")},_makeRequest:function(){this.log("_makeRequest not overloaded - no environment loaded?")},_getMultipartRequestData:function(){this.log("_getMultipartRequestData not overloaded - no environment loaded?")},_IEModeConversion:function(){this.log("_IEModeConversion not overloaded - browser environment not loaded.")},_processGetStatementResult:function(t,e){var n,i,r,o,s={};if(!e.attachments)return u.Statement.fromJSON(t.responseText);for(n=t.getResponseHeader("Content-Type").split("boundary=")[1],i=this._parseMultipart(n,t.response),r=JSON.parse(i[0].body),o=1;o<i.length;o+=1)s[i[o].headers["X-Experience-API-Hash"]]=i[o].body;return this._assignAttachmentContent([r],s),new u.Statement(r)},sendRequest:function(t){this.log("sendRequest");var e,n=this.endpoint+t.url,i={};if(0===t.url.indexOf("http")&&(n=t.url),null!==this.extended)for(e in t.params=t.params||{},this.extended)this.extended.hasOwnProperty(e)&&(t.params.hasOwnProperty(e)||null!==this.extended[e]&&(t.params[e]=this.extended[e]));for(e in i.Authorization=this.auth,"0.9"!==this.version&&(i["X-Experience-API-Version"]=this.version),t.headers)t.headers.hasOwnProperty(e)&&(i[e]=t.headers[e]);return this._makeRequest(n,i,t)},about:function(t){var e,n,i;if(this.log("about"),e={url:"about",method:"GET",params:{}},void 0!==(t=t||{}).callback&&(i=function(e,n){var i=n;null===e&&(i=u.About.fromJSON(n.responseText)),t.callback(e,i)},e.callback=i),n=this.sendRequest(e),!i)return null===n.err&&(n.xhr=u.About.fromJSON(n.xhr.responseText)),n},saveStatement:function(t,e){this.log("saveStatement");var n,i,r,o={url:"statements",headers:{}},s=[];e=e||{};try{n=t.asVersion(this.version)}catch(a){return this.allowFail?(this.log("[warning] statement could not be serialized in version ("+this.version+"): "+a),void 0!==e.callback?void e.callback(null,null):{err:null,xhr:null}):(this.log("[error] statement could not be serialized in version ("+this.version+"): "+a),void 0!==e.callback?void e.callback(a,null):{err:a,xhr:null})}if(n.hasOwnProperty("attachments")&&t.hasAttachmentWithContent()){for(i=this._getBoundary(),o.headers["Content-Type"]="multipart/mixed; boundary="+i,r=0;r<t.attachments.length;r+=1)null!==t.attachments[r].content&&s.push(t.attachments[r]);try{o.data=this._getMultipartRequestData(i,n,s)}catch(a){return this.allowFail?(this.log("[warning] multipart request data could not be created (attachments probably not supported): "+a),void 0!==e.callback?void e.callback(null,null):{err:null,xhr:null}):(this.log("[error] multipart request data could not be created (attachments probably not supported): "+a),void 0!==e.callback?void e.callback(a,null):{err:a,xhr:null})}}else o.headers["Content-Type"]="application/json",o.data=JSON.stringify(n);return null!==t.id?(o.method="PUT",o.params={statementId:t.id}):o.method="POST",void 0!==e.callback&&(o.callback=e.callback),this.sendRequest(o)},retrieveStatement:function(t,e){this.log("retrieveStatement");var n,i,r,o=this;return(e=e||{}).params=e.params||{},n={url:"statements",method:"GET",params:{statementId:t}},e.params.attachments&&(n.params.attachments=!0,n.expectMultipart=!0),void 0!==e.callback&&(r=function(t,n){var i=n;null===t&&(i=o._processGetStatementResult(n,e.params)),e.callback(t,i)},n.callback=r),i=this.sendRequest(n),r||(i.statement=null,null===i.err&&(i.statement=o._processGetStatementResult(i.xhr,e.params))),i},retrieveVoidedStatement:function(t,e){this.log("retrieveVoidedStatement");var n,i,r,o=this;return(e=e||{}).params=e.params||{},n={url:"statements",method:"GET",params:{}},"0.9"===this.version||"0.95"===this.version?n.params.statementId=t:(n.params.voidedStatementId=t,e.params.attachments&&(n.params.attachments=!0,n.expectMultipart=!0)),void 0!==e.callback&&(r=function(t,n){var i=n;null===t&&(i=o._processGetStatementResult(n,e.params)),e.callback(t,i)},n.callback=r),i=this.sendRequest(n),r||(i.statement=null,null===i.err&&(i.statement=o._processGetStatementResult(i.xhr,e.params))),i},saveStatements:function(t,e){this.log("saveStatements");var n,i,r,o,s={url:"statements",method:"POST",headers:{}},a=[],l=[];if(e=e||{},0===t.length)return void 0!==e.callback?void e.callback(new Error("no statements"),null):{err:new Error("no statements"),xhr:null};for(r=0;r<t.length;r+=1){try{n=t[r].asVersion(this.version)}catch(c){return this.allowFail?(this.log("[warning] statement could not be serialized in version ("+this.version+"): "+c),void 0!==e.callback?void e.callback(null,null):{err:null,xhr:null}):(this.log("[error] statement could not be serialized in version ("+this.version+"): "+c),void 0!==e.callback?void e.callback(c,null):{err:c,xhr:null})}if(t[r].hasAttachmentWithContent())for(o=0;o<t[r].attachments.length;o+=1)null!==t[r].attachments[o].content&&l.push(t[r].attachments[o]);a.push(n)}if(0!==l.length){i=this._getBoundary(),s.headers["Content-Type"]="multipart/mixed; boundary="+i;try{s.data=this._getMultipartRequestData(i,a,l)}catch(c){return this.allowFail?(this.log("[warning] multipart request data could not be created (attachments probably not supported): "+c),void 0!==e.callback?void e.callback(null,null):{err:null,xhr:null}):(this.log("[error] multipart request data could not be created (attachments probably not supported): "+c),void 0!==e.callback?void e.callback(c,null):{err:c,xhr:null})}}else s.headers["Content-Type"]="application/json",s.data=JSON.stringify(a);return void 0!==e.callback&&(s.callback=e.callback),this.sendRequest(s)},queryStatements:function(t){this.log("queryStatements");var e,n,i,r=this;(t=t||{}).params=t.params||{};try{e=this._queryStatementsRequestCfg(t),t.params.attachments&&(e.expectMultipart=!0)}catch(o){return this.log("[error] Query statements failed - "+o),void 0!==t.callback&&t.callback(o,{}),{err:o,statementsResult:null}}return void 0!==t.callback&&(i=function(e,n){var i,o,s,a,l=n,c={};if(null===e)if(t.params.attachments){for(o=n.getResponseHeader("Content-Type").split("boundary=")[1],i=r._parseMultipart(o,n.response),s=JSON.parse(i[0].body),a=1;a<i.length;a+=1)c[i[a].headers["X-Experience-API-Hash"]]=i[a].body;for(r._assignAttachmentContent(s.statements,c),l=new u.StatementsResult({statements:s.statements}),a=0;a<l.statements.length;a+=1)l.statements[a]instanceof u.Statement||(l.statements[a]=new u.Statement(l.statements[a]))}else l=u.StatementsResult.fromJSON(n.responseText);t.callback(e,l)},e.callback=i),(n=this.sendRequest(e)).config=e,i||(n.statementsResult=null,null===n.err&&(n.statementsResult=u.StatementsResult.fromJSON(n.xhr.responseText))),n},_queryStatementsRequestCfg:function(t){this.log("_queryStatementsRequestCfg");var e,n,i={},r={url:"statements",method:"GET",params:i},o=["agent","actor","object","instructor"],s=["verb","activity"],a=["registration","context","since","until","limit","authoritative","sparse","ascending","related_activities","related_agents","format","attachments"],l={verb:!0,registration:!0,since:!0,until:!0,limit:!0,ascending:!0},c={.9:{supported:{actor:!0,instructor:!0,target:!0,object:!0,context:!0,authoritative:!0,sparse:!0}},"1.0.0":{supported:{agent:!0,activity:!0,related_activities:!0,related_agents:!0,format:!0,attachments:!0}}};for(n in c[.95]=c[.9],c["1.0.1"]=c["1.0.0"],c["1.0.2"]=c["1.0.0"],t.params.hasOwnProperty("target")&&(t.params.object=t.params.target),t.params)if(t.params.hasOwnProperty(n)&&void 0===l[n]&&void 0===c[this.version].supported[n])throw"Unrecognized query parameter configured: "+n;for(e=0;e<o.length;e+=1)void 0!==t.params[o[e]]&&(i[o[e]]=JSON.stringify(t.params[o[e]].asVersion(this.version)));for(e=0;e<s.length;e+=1)void 0!==t.params[s[e]]&&(void 0===t.params[s[e]].id?i[s[e]]=t.params[s[e]]:i[s[e]]=t.params[s[e]].id);for(e=0;e<a.length;e+=1)void 0!==t.params[a[e]]&&null!==t.params[a[e]]&&(i[a[e]]=t.params[a[e]]);return r},_assignAttachmentContent:function(t,e){var n,i;for(n=0;n<t.length;n+=1)if(t[n].hasOwnProperty("attachments")&&null!==t[n].attachments)for(i=0;i<t[n].attachments.length;i+=1)e.hasOwnProperty(t[n].attachments[i].sha2)&&(t[n].attachments[i].content=e[t[n].attachments[i].sha2])},_parseMultipart:function(t,e){var n,i,r,o,s,a,l,c,h,p,g,d="--"+t,f=[];for(n=new Uint8Array(e),r=(i=this.__uint8ToString(n)).indexOf(d+"--"),o=i.indexOf(d);-1!==o;)s=i.indexOf(d,o+d.length),a=o+d.length+2,c=(l=i.indexOf("\r\n\r\n",o))+2+2,h=s-2,p=this._parseHeaders(this.__uint8ToString(new Uint8Array(e.slice(a,l)))),g=e.slice(c,h),0===f.length&&(g=u.Utils.stringFromArrayBuffer(g)),f.push({headers:p,body:g}),o=s===r?-1:s;return f},__uint8ToString:function(t){var e,n="",i=t.byteLength;for(e=0;e<i;e+=1)n+=String.fromCharCode(t[e]);return n},_parseHeaders:function(t){var e,n,i,r={};for(e=t.split("\n"),i=0;i<e.length;i+=1)null!==(n=e[i].split(":",2))[1]?(r[n[0]]=n[1].replace(/^\s+|\s+$/g,""),n[0]):"\t"===n[0].substring(0,1)&&(r[n[0]]=n[1].replace(/^\s+|\s+$/g,""));return r},moreStatements:function(t){var e,n,i,r,o;return this.log("moreStatements: "+t.url),t=t||{},r=u.Utils.parseURL(t.url,{allowRelative:!0}),o=u.Utils.getServerRoot(this.endpoint),0===r.path.indexOf("/statements")&&(r.path=this.endpoint.replace(o,"")+r.path,this.log("converting non-standard more URL to "+r.path)),0!==r.path.indexOf("/")&&(r.path="/"+r.path),e={method:"GET",url:o+r.path,params:r.params},void 0!==t.callback&&(i=function(e,n){var i=n;null===e&&(i=u.StatementsResult.fromJSON(n.responseText)),t.callback(e,i)},e.callback=i),(n=this.sendRequest(e)).config=e,i||(n.statementsResult=null,null===n.err&&(n.statementsResult=u.StatementsResult.fromJSON(n.xhr.responseText))),n},retrieveState:function(t,e){this.log("retrieveState");var n,i,r,o={},s={},a=this;if(r=e.requestHeaders||{},o={stateId:t,activityId:e.activity.id},"0.9"===this.version?o.actor=JSON.stringify(e.agent.asVersion(this.version)):o.agent=JSON.stringify(e.agent.asVersion(this.version)),void 0!==e.registration&&null!==e.registration&&("0.9"===this.version?o.registrationId=e.registration:o.registration=e.registration),s={url:"activities/state",method:"GET",params:o,ignore404:!0,headers:r},void 0!==e.callback&&(i=function(n,i){var r=i;if(null===n)if(404===i.status)r=null;else if(r=new u.State({id:t,contents:i.responseText}),void 0!==i.getResponseHeader&&null!==i.getResponseHeader("ETag")&&""!==i.getResponseHeader("ETag")?r.etag=i.getResponseHeader("ETag"):r.etag='"'+u.Utils.getSHA1String(i.responseText)+'"',void 0!==i.contentType?r.contentType=i.contentType:void 0!==i.getResponseHeader&&null!==i.getResponseHeader("Content-Type")&&""!==i.getResponseHeader("Content-Type")&&(r.contentType=i.getResponseHeader("Content-Type")),u.Utils.isApplicationJSON(r.contentType))try{r.contents=JSON.parse(r.contents)}catch(o){a.log("retrieveState - failed to deserialize JSON: "+o)}e.callback(n,r)},s.callback=i),n=this.sendRequest(s),!i&&(n.state=null,null===n.err&&404!==n.xhr.status&&(n.state=new u.State({id:t,contents:n.xhr.responseText}),void 0!==n.xhr.getResponseHeader&&null!==n.xhr.getResponseHeader("ETag")&&""!==n.xhr.getResponseHeader("ETag")?n.state.etag=n.xhr.getResponseHeader("ETag"):n.state.etag='"'+u.Utils.getSHA1String(n.xhr.responseText)+'"',void 0!==n.xhr.contentType?n.state.contentType=n.xhr.contentType:void 0!==n.xhr.getResponseHeader&&null!==n.xhr.getResponseHeader("Content-Type")&&""!==n.xhr.getResponseHeader("Content-Type")&&(n.state.contentType=n.xhr.getResponseHeader("Content-Type")),u.Utils.isApplicationJSON(n.state.contentType))))try{n.state.contents=JSON.parse(n.state.contents)}catch(l){this.log("retrieveState - failed to deserialize JSON: "+l)}return n},retrieveStateIds:function(t){this.log("retrieveStateIds");var e,n,i,r,o={};if(n=(t=t||{}).requestHeaders||{},o.activityId=t.activity.id,"0.9"===this.version?o.actor=JSON.stringify(t.agent.asVersion(this.version)):o.agent=JSON.stringify(t.agent.asVersion(this.version)),void 0!==t.registration&&null!==t.registration&&("0.9"===this.version?o.registrationId=t.registration:o.registration=t.registration),e={url:"activities/state",method:"GET",params:o,headers:n,ignore404:!0},void 0!==t.callback&&(r=function(e,n){var i=n;if(null===e){if(404===n.status)i=[];else try{i=JSON.parse(n.responseText)}catch(r){e="Response JSON parse error: "+r}t.callback(e,i)}else t.callback(e,i)},e.callback=r),void 0!==t.since&&(e.params.since=t.since),i=this.sendRequest(e),!r){if(i.profileIds=null,null!==i.err)return i;if(404===i.xhr.status)i.profileIds=[];else try{i.profileIds=JSON.parse(i.xhr.responseText)}catch(s){i.err="retrieveStateIds - JSON parse error: "+s}}return i},saveState:function(t,e,n){var i,r,o;return this.log("saveState"),o=n.requestHeaders||{},void 0===n.contentType&&(n.contentType="application/octet-stream"),o["Content-Type"]=n.contentType,"object"==typeof e&&u.Utils.isApplicationJSON(n.contentType)&&(e=JSON.stringify(e)),void 0!==n.method&&"POST"===n.method||(n.method="PUT"),i={stateId:t,activityId:n.activity.id},"0.9"===this.version?i.actor=JSON.stringify(n.agent.asVersion(this.version)):i.agent=JSON.stringify(n.agent.asVersion(this.version)),void 0!==n.registration&&null!==n.registration&&("0.9"===this.version?i.registrationId=n.registration:i.registration=n.registration),r={url:"activities/state",method:n.method,params:i,data:e,headers:o},void 0!==n.callback&&(r.callback=n.callback),void 0!==n.lastSHA1&&null!==n.lastSHA1&&(r.headers["If-Match"]=n.lastSHA1),this.sendRequest(r)},dropState:function(t,e){var n,i,r;return this.log("dropState"),r=e.requestHeaders||{},n={activityId:e.activity.id},"0.9"===this.version?n.actor=JSON.stringify(e.agent.asVersion(this.version)):n.agent=JSON.stringify(e.agent.asVersion(this.version)),null!==t&&(n.stateId=t),void 0!==e.registration&&null!==e.registration&&("0.9"===this.version?n.registrationId=e.registration:n.registration=e.registration),i={url:"activities/state",method:"DELETE",params:n,headers:r},void 0!==e.callback&&(i.callback=e.callback),this.sendRequest(i)},retrieveActivity:function(t,e){this.log("retrieveActivity");var n,i,r,o={};return r=e.requestHeaders||{},o={url:"activities",method:"GET",params:{activityId:t},ignore404:!0,headers:r},void 0!==e.callback&&(i=function(n,i){var r=i;null===n&&(r=404===i.status?new u.Activity({id:t}):u.Activity.fromJSON(i.responseText)),e.callback(n,r)},o.callback=i),n=this.sendRequest(o),i||(n.activity=null,null===n.err&&(404===n.xhr.status?n.activity=new u.Activity({id:t}):n.activity=u.Activity.fromJSON(n.xhr.responseText))),n},retrieveActivityProfile:function(t,e){this.log("retrieveActivityProfile");var n,i,r,o={},s=this;if(r=e.requestHeaders||{},o={url:"activities/profile",method:"GET",params:{profileId:t,activityId:e.activity.id},ignore404:!0,headers:r},void 0!==e.callback&&(i=function(n,i){var r=i;if(null===n)if(404===i.status)r=null;else if(r=new u.ActivityProfile({id:t,activity:e.activity,contents:i.responseText}),void 0!==i.getResponseHeader&&null!==i.getResponseHeader("ETag")&&""!==i.getResponseHeader("ETag")?r.etag=i.getResponseHeader("ETag"):r.etag='"'+u.Utils.getSHA1String(i.responseText)+'"',void 0!==i.contentType?r.contentType=i.contentType:void 0!==i.getResponseHeader&&null!==i.getResponseHeader("Content-Type")&&""!==i.getResponseHeader("Content-Type")&&(r.contentType=i.getResponseHeader("Content-Type")),u.Utils.isApplicationJSON(r.contentType))try{r.contents=JSON.parse(r.contents)}catch(o){s.log("retrieveActivityProfile - failed to deserialize JSON: "+o)}e.callback(n,r)},o.callback=i),n=this.sendRequest(o),!i&&(n.profile=null,null===n.err&&404!==n.xhr.status&&(n.profile=new u.ActivityProfile({id:t,activity:e.activity,contents:n.xhr.responseText}),void 0!==n.xhr.getResponseHeader&&null!==n.xhr.getResponseHeader("ETag")&&""!==n.xhr.getResponseHeader("ETag")?n.profile.etag=n.xhr.getResponseHeader("ETag"):n.profile.etag='"'+u.Utils.getSHA1String(n.xhr.responseText)+'"',void 0!==n.xhr.contentType?n.profile.contentType=n.xhr.contentType:void 0!==n.xhr.getResponseHeader&&null!==n.xhr.getResponseHeader("Content-Type")&&""!==n.xhr.getResponseHeader("Content-Type")&&(n.profile.contentType=n.xhr.getResponseHeader("Content-Type")),u.Utils.isApplicationJSON(n.profile.contentType))))try{n.profile.contents=JSON.parse(n.profile.contents)}catch(a){this.log("retrieveActivityProfile - failed to deserialize JSON: "+a)}return n},retrieveActivityProfileIds:function(t){var e,n,i,r;if(this.log("retrieveActivityProfileIds"),n=(t=t||{}).requestHeaders||{},e={url:"activities/profile",method:"GET",params:{activityId:t.activity.id},headers:n,ignore404:!0},void 0!==t.callback&&(r=function(e,n){var i=n;if(null===e){if(404===n.status)i=[];else try{i=JSON.parse(n.responseText)}catch(r){e="Response JSON parse error: "+r}t.callback(e,i)}else t.callback(e,i)},e.callback=r),void 0!==t.since&&(e.params.since=t.since),i=this.sendRequest(e),!r){if(i.profileIds=null,null!==i.err)return i;if(404===i.xhr.status)i.profileIds=[];else try{i.profileIds=JSON.parse(i.xhr.responseText)}catch(o){i.err="retrieveActivityProfileIds - JSON parse error: "+o}}return i},saveActivityProfile:function(t,e,n){var i,r;return this.log("saveActivityProfile"),r=n.requestHeaders||{},void 0===n.contentType&&(n.contentType="application/octet-stream"),r["Content-Type"]=n.contentType,void 0!==n.method&&"POST"===n.method||(n.method="PUT"),"object"==typeof e&&u.Utils.isApplicationJSON(n.contentType)&&(e=JSON.stringify(e)),i={url:"activities/profile",method:n.method,params:{profileId:t,activityId:n.activity.id},data:e,headers:r},void 0!==n.callback&&(i.callback=n.callback),void 0!==n.lastSHA1&&null!==n.lastSHA1?i.headers["If-Match"]=n.lastSHA1:i.headers["If-None-Match"]="*",this.sendRequest(i)},dropActivityProfile:function(t,e){var n,i;return this.log("dropActivityProfile"),i=e.requestHeaders||{},n={url:"activities/profile",method:"DELETE",params:{profileId:t,activityId:e.activity.id},headers:i},void 0!==e.callback&&(n.callback=e.callback),this.sendRequest(n)},retrieveAgentProfile:function(t,e){this.log("retrieveAgentProfile");var n,i,r,o={},s=this;if(r=e.requestHeaders||{},o={method:"GET",params:{profileId:t},ignore404:!0,headers:r},"0.9"===this.version?(o.url="actors/profile",o.params.actor=JSON.stringify(e.agent.asVersion(this.version))):(o.url="agents/profile",o.params.agent=JSON.stringify(e.agent.asVersion(this.version))),void 0!==e.callback&&(i=function(n,i){var r=i;if(null===n)if(404===i.status)r=null;else if(r=new u.AgentProfile({id:t,agent:e.agent,contents:i.responseText}),void 0!==i.getResponseHeader&&null!==i.getResponseHeader("ETag")&&""!==i.getResponseHeader("ETag")?r.etag=i.getResponseHeader("ETag"):r.etag='"'+u.Utils.getSHA1String(i.responseText)+'"',void 0!==i.contentType?r.contentType=i.contentType:void 0!==i.getResponseHeader&&null!==i.getResponseHeader("Content-Type")&&""!==i.getResponseHeader("Content-Type")&&(r.contentType=i.getResponseHeader("Content-Type")),u.Utils.isApplicationJSON(r.contentType))try{r.contents=JSON.parse(r.contents)}catch(o){s.log("retrieveAgentProfile - failed to deserialize JSON: "+o)}e.callback(n,r)},o.callback=i),n=this.sendRequest(o),!i&&(n.profile=null,null===n.err&&404!==n.xhr.status&&(n.profile=new u.AgentProfile({id:t,agent:e.agent,contents:n.xhr.responseText}),void 0!==n.xhr.getResponseHeader&&null!==n.xhr.getResponseHeader("ETag")&&""!==n.xhr.getResponseHeader("ETag")?n.profile.etag=n.xhr.getResponseHeader("ETag"):n.profile.etag='"'+u.Utils.getSHA1String(n.xhr.responseText)+'"',void 0!==n.xhr.contentType?n.profile.contentType=n.xhr.contentType:void 0!==n.xhr.getResponseHeader&&null!==n.xhr.getResponseHeader("Content-Type")&&""!==n.xhr.getResponseHeader("Content-Type")&&(n.profile.contentType=n.xhr.getResponseHeader("Content-Type")),u.Utils.isApplicationJSON(n.profile.contentType))))try{n.profile.contents=JSON.parse(n.profile.contents)}catch(a){this.log("retrieveAgentProfile - failed to deserialize JSON: "+a)}return n},retrieveAgentProfileIds:function(t){this.log("retrieveAgentProfileIds");var e,n,i,r={};if(e={method:"GET",params:r,headers:(t=t||{}).requestHeaders||{},ignore404:!0},"0.9"===this.version?(e.url="actors/profile",r.actor=JSON.stringify(t.agent.asVersion(this.version))):(e.url="agents/profile",r.agent=JSON.stringify(t.agent.asVersion(this.version))),void 0!==t.callback&&(i=function(e,n){var i=n;if(null===e){if(404===n.status)i=[];else try{i=JSON.parse(n.responseText)}catch(r){e="Response JSON parse error: "+r}t.callback(e,i)}else t.callback(e,i)},e.callback=i),void 0!==t.since&&(e.params.since=t.since),n=this.sendRequest(e),!i){if(n.profileIds=null,null!==n.err)return n;if(404===n.xhr.status)n.profileIds=[];else try{n.profileIds=JSON.parse(n.xhr.responseText)}catch(o){n.err="retrieveAgentProfileIds - JSON parse error: "+o}}return n},saveAgentProfile:function(t,e,n){var i,r;return this.log("saveAgentProfile"),r=n.requestHeaders||{},void 0===n.contentType&&(n.contentType="application/octet-stream"),r["Content-Type"]=n.contentType,void 0!==n.method&&"POST"===n.method||(n.method="PUT"),"object"==typeof e&&u.Utils.isApplicationJSON(n.contentType)&&(e=JSON.stringify(e)),i={method:n.method,params:{profileId:t},data:e,headers:r},"0.9"===this.version?(i.url="actors/profile",i.params.actor=JSON.stringify(n.agent.asVersion(this.version))):(i.url="agents/profile",i.params.agent=JSON.stringify(n.agent.asVersion(this.version))),void 0!==n.callback&&(i.callback=n.callback),void 0!==n.lastSHA1&&null!==n.lastSHA1?i.headers["If-Match"]=n.lastSHA1:i.headers["If-None-Match"]="*",this.sendRequest(i)},dropAgentProfile:function(t,e){var n,i;return this.log("dropAgentProfile"),i={method:"DELETE",params:n={profileId:t},headers:e.requestHeaders||{}},"0.9"===this.version?(i.url="actors/profile",n.actor=JSON.stringify(e.agent.asVersion(this.version))):(i.url="agents/profile",n.agent=JSON.stringify(e.agent.asVersion(this.version))),void 0!==e.callback&&(i.callback=e.callback),this.sendRequest(i)}},t.syncEnabled=null}(),function(){"use strict";var t=u.AgentAccount=function(t){this.log("constructor"),this.homePage=null,this.name=null,this.init(t)};t.prototype={LOG_SRC:"AgentAccount",log:u.prototype.log,init:function(t){this.log("init");var e,n=["name","homePage"];for(void 0!==(t=t||{}).accountServiceHomePage&&(t.homePage=t.accountServiceHomePage),void 0!==t.accountName&&(t.name=t.accountName),e=0;e<n.length;e+=1)t.hasOwnProperty(n[e])&&null!==t[n[e]]&&(this[n[e]]=t[n[e]])},toString:function(){this.log("toString");var t="";return null!==this.name||null!==this.homePage?(t+=null!==this.name?this.name:"-",t+=":",t+=null!==this.homePage?this.homePage:"-"):t="AgentAccount: unidentified",t},asVersion:function(t){this.log("asVersion: "+t);var e={};return"0.9"===(t=t||u.versions()[0])?(e.accountName=this.name,e.accountServiceHomePage=this.homePage):(e.name=this.name,e.homePage=this.homePage),e}},t.fromJSON=function(e){t.prototype.log("fromJSON");var n=JSON.parse(e);return new t(n)}}(),function(){"use strict";var t=u.Agent=function(t){this.log("constructor"),this.name=null,this.mbox=null,this.mbox_sha1sum=null,this.openid=null,this.account=null,this.degraded=!1,this.init(t)};t.prototype={objectType:"Agent",LOG_SRC:"Agent",log:u.prototype.log,init:function(t){this.log("init");var e,n,i=["name","mbox","mbox_sha1sum","openid"];for(void 0!==(t=t||{}).lastName||void 0!==t.firstName?(t.name="",void 0!==t.firstName&&t.firstName.length>0&&(t.name=t.firstName[0],t.firstName.length>1&&(this.degraded=!0)),""!==t.name&&(t.name+=" "),void 0!==t.lastName&&t.lastName.length>0&&(t.name+=t.lastName[0],t.lastName.length>1&&(this.degraded=!0))):void 0===t.familyName&&void 0===t.givenName||(t.name="",void 0!==t.givenName&&t.givenName.length>0&&(t.name=t.givenName[0],t.givenName.length>1&&(this.degraded=!0)),""!==t.name&&(t.name+=" "),void 0!==t.familyName&&t.familyName.length>0&&(t.name+=t.familyName[0],t.familyName.length>1&&(this.degraded=!0))),"object"==typeof t.name&&null!==t.name&&(t.name.length>1&&(this.degraded=!0),t.name=t.name[0]),"object"==typeof t.mbox&&null!==t.mbox&&(t.mbox.length>1&&(this.degraded=!0),t.mbox=t.mbox[0]),"object"==typeof t.mbox_sha1sum&&null!==t.mbox_sha1sum&&(t.mbox_sha1sum.length>1&&(this.degraded=!0),t.mbox_sha1sum=t.mbox_sha1sum[0]),"object"==typeof t.openid&&null!==t.openid&&(t.openid.length>1&&(this.degraded=!0),t.openid=t.openid[0]),"object"==typeof t.account&&null!==t.account&&void 0===t.account.homePage&&void 0===t.account.name&&(0===t.account.length?delete t.account:(t.account.length>1&&(this.degraded=!0),t.account=t.account[0])),t.hasOwnProperty("account")&&(t.account instanceof u.AgentAccount?this.account=t.account:this.account=new u.AgentAccount(t.account)),e=0;e<i.length;e+=1)t.hasOwnProperty(i[e])&&null!==t[i[e]]&&(n=t[i[e]],"mbox"===i[e]&&-1===n.indexOf("mailto:")&&(n="mailto:"+n),this[i[e]]=n)},toString:function(){return this.log("toString"),null!==this.name?this.name:null!==this.mbox?this.mbox.replace("mailto:",""):null!==this.mbox_sha1sum?this.mbox_sha1sum:null!==this.openid?this.openid:null!==this.account?this.account.toString():this.objectType+": unidentified"},asVersion:function(t){this.log("asVersion: "+t);var e={objectType:this.objectType};return"0.9"===(t=t||u.versions()[0])?(null!==this.mbox?e.mbox=[this.mbox]:null!==this.mbox_sha1sum?e.mbox_sha1sum=[this.mbox_sha1sum]:null!==this.openid?e.openid=[this.openid]:null!==this.account&&(e.account=[this.account.asVersion(t)]),null!==this.name&&(e.name=[this.name])):(null!==this.mbox?e.mbox=this.mbox:null!==this.mbox_sha1sum?e.mbox_sha1sum=this.mbox_sha1sum:null!==this.openid?e.openid=this.openid:null!==this.account&&(e.account=this.account.asVersion(t)),null!==this.name&&(e.name=this.name)),e}},t.fromJSON=function(e){t.prototype.log("fromJSON");var n=JSON.parse(e);return new t(n)}}(),function(){"use strict";var t=u.Group=function(t){this.log("constructor"),this.name=null,this.mbox=null,this.mbox_sha1sum=null,this.openid=null,this.account=null,this.member=[],this.init(t)};t.prototype={objectType:"Group",LOG_SRC:"Group",log:u.prototype.log,init:function(t){var e;if(this.log("init"),t=t||{},u.Agent.prototype.init.call(this,t),void 0!==t.member)for(e=0;e<t.member.length;e+=1)t.member[e]instanceof u.Agent?this.member.push(t.member[e]):this.member.push(new u.Agent(t.member[e]))},toString:function(t){this.log("toString");var e=u.Agent.prototype.toString.call(this,t);return e!==this.objectType+": unidentified"&&(e=this.objectType+": "+e),e},asVersion:function(t){var e,n;if(this.log("asVersion: "+t),t=t||u.versions()[0],e=u.Agent.prototype.asVersion.call(this,t),this.member.length>0)for(e.member=[],n=0;n<this.member.length;n+=1)e.member.push(this.member[n].asVersion(t));return e}},t.fromJSON=function(e){t.prototype.log("fromJSON");var n=JSON.parse(e);return new t(n)}}(),function(){"use strict";var t={"http://adlnet.gov/expapi/verbs/experienced":"experienced","http://adlnet.gov/expapi/verbs/attended":"attended","http://adlnet.gov/expapi/verbs/attempted":"attempted","http://adlnet.gov/expapi/verbs/completed":"completed","http://adlnet.gov/expapi/verbs/passed":"passed","http://adlnet.gov/expapi/verbs/failed":"failed","http://adlnet.gov/expapi/verbs/answered":"answered","http://adlnet.gov/expapi/verbs/interacted":"interacted","http://adlnet.gov/expapi/verbs/imported":"imported","http://adlnet.gov/expapi/verbs/created":"created","http://adlnet.gov/expapi/verbs/shared":"shared","http://adlnet.gov/expapi/verbs/voided":"voided"},e=u.Verb=function(t){this.log("constructor"),this.id=null,this.display=null,this.init(t)};e.prototype={LOG_SRC:"Verb",log:u.prototype.log,init:function(e){this.log("init");var n,i,r=["id","display"];if("string"==typeof e){for(i in this.id=e,this.display={und:this.id},t)if(t.hasOwnProperty(i)&&t[i]===e){this.id=i;break}}else{for(e=e||{},n=0;n<r.length;n+=1)e.hasOwnProperty(r[n])&&null!==e[r[n]]&&(this[r[n]]=e[r[n]]);null===this.display&&void 0!==t[this.id]&&(this.display={und:t[this.id]})}},toString:function(t){return this.log("toString"),null!==this.display?this.getLangDictionaryValue("display",t):this.id},asVersion:function(e){var n;return this.log("asVersion"),"0.9"===(e=e||u.versions()[0])?n=t[this.id]:(n={id:this.id},null!==this.display&&(n.display=this.display)),n},getLangDictionaryValue:u.Utils.getLangDictionaryValue},e.fromJSON=function(t){e.prototype.log("fromJSON");var n=JSON.parse(t);return new e(n)}}(),function(){"use strict";var t=u.Result=function(t){this.log("constructor"),this.score=null,this.success=null,this.completion=null,this.duration=null,this.response=null,this.extensions=null,this.init(t)};t.prototype={LOG_SRC:"Result",log:u.prototype.log,init:function(t){this.log("init");var e,n=["completion","duration","extensions","response","success"];for((t=t||{}).hasOwnProperty("score")&&null!==t.score&&(t.score instanceof u.Score?this.score=t.score:this.score=new u.Score(t.score)),e=0;e<n.length;e+=1)t.hasOwnProperty(n[e])&&null!==t[n[e]]&&(this[n[e]]=t[n[e]]);"Completed"===this.completion&&(this.completion=!0)},asVersion:function(t){this.log("asVersion");var e,n={},i=["success","duration","response","extensions"],r=["score"];for(t=t||u.versions()[0],e=0;e<i.length;e+=1)null!==this[i[e]]&&(n[i[e]]=this[i[e]]);for(e=0;e<r.length;e+=1)null!==this[r[e]]&&(n[r[e]]=this[r[e]].asVersion(t));return null!==this.completion&&("0.9"===t?this.completion&&(n.completion="Completed"):n.completion=this.completion),n}},t.fromJSON=function(e){t.prototype.log("fromJSON");var n=JSON.parse(e);return new t(n)}}(),function(){"use strict";var t=u.Score=function(t){this.log("constructor"),this.scaled=null,this.raw=null,this.min=null,this.max=null,this.init(t)};t.prototype={LOG_SRC:"Score",log:u.prototype.log,init:function(t){this.log("init");var e,n=["scaled","raw","min","max"];for(t=t||{},e=0;e<n.length;e+=1)t.hasOwnProperty(n[e])&&null!==t[n[e]]&&(this[n[e]]=t[n[e]])},asVersion:function(t){this.log("asVersion");var e,n={},i=["scaled","raw","min","max"];for(t=t||u.versions()[0],e=0;e<i.length;e+=1)null!==this[i[e]]&&(n[i[e]]=this[i[e]]);return n}},t.fromJSON=function(e){t.prototype.log("fromJSON");var n=JSON.parse(e);return new t(n)}}(),function(){"use strict";var t=u.InteractionComponent=function(t){this.log("constructor"),this.id=null,this.description=null,this.init(t)};t.prototype={LOG_SRC:"InteractionComponent",log:u.prototype.log,init:function(t){this.log("init");var e,n=["id","description"];for(t=t||{},e=0;e<n.length;e+=1)t.hasOwnProperty(n[e])&&null!==t[n[e]]&&(this[n[e]]=t[n[e]])},asVersion:function(t){this.log("asVersion");var e,n,i={id:this.id},r=["description"];for(t=t||u.versions()[0],e=0;e<r.length;e+=1)null!==this[n=r[e]]&&(i[n]=this[n]);return i},getLangDictionaryValue:u.Utils.getLangDictionaryValue},t.fromJSON=function(e){t.prototype.log("fromJSON");var n=JSON.parse(e);return new t(n)}}(),function(){"use strict";var t={"http://adlnet.gov/expapi/activities/course":"course","http://adlnet.gov/expapi/activities/module":"module","http://adlnet.gov/expapi/activities/meeting":"meeting","http://adlnet.gov/expapi/activities/media":"media","http://adlnet.gov/expapi/activities/performance":"performance","http://adlnet.gov/expapi/activities/simulation":"simulation","http://adlnet.gov/expapi/activities/assessment":"assessment","http://adlnet.gov/expapi/activities/interaction":"interaction","http://adlnet.gov/expapi/activities/cmi.interaction":"cmi.interaction","http://adlnet.gov/expapi/activities/question":"question","http://adlnet.gov/expapi/activities/objective":"objective","http://adlnet.gov/expapi/activities/link":"link"},e=u.ActivityDefinition=function(t){this.log("constructor"),this.name=null,this.description=null,this.type=null,this.moreInfo=null,this.extensions=null,this.interactionType=null,this.correctResponsesPattern=null,this.choices=null,this.scale=null,this.source=null,this.target=null,this.steps=null,this.init(t)};e.prototype={LOG_SRC:"ActivityDefinition",log:u.prototype.log,init:function(e){this.log("init");var n,i,r,o=["name","description","moreInfo","extensions","correctResponsesPattern"],s=[];if((e=e||{}).hasOwnProperty("type")&&null!==e.type){for(r in t)t.hasOwnProperty(r)&&t[r]===e.type&&(e.type=t[r]);this.type=e.type}if(e.hasOwnProperty("interactionType")&&null!==e.interactionType&&(this.interactionType=e.interactionType,"choice"===e.interactionType||"sequencing"===e.interactionType?s.push("choices"):"likert"===e.interactionType?s.push("scale"):"matching"===e.interactionType?(s.push("source"),s.push("target")):"performance"===e.interactionType&&s.push("steps"),s.length>0))for(n=0;n<s.length;n+=1)if(r=s[n],e.hasOwnProperty(r)&&null!==e[r])for(this[r]=[],i=0;i<e[r].length;i+=1)e[r][i]instanceof u.InteractionComponent?this[r].push(e[r][i]):this[r].push(new u.InteractionComponent(e[r][i]));for(n=0;n<o.length;n+=1)e.hasOwnProperty(o[n])&&null!==e[o[n]]&&(this[o[n]]=e[o[n]])},toString:function(t){return this.log("toString"),null!==this.name?this.getLangDictionaryValue("name",t):null!==this.description?this.getLangDictionaryValue("description",t):""},asVersion:function(e){this.log("asVersion");var n,i,r,o={},s=["name","description","interactionType","correctResponsesPattern","extensions"],a=["choices","scale","source","target","steps"];for(e=e||u.versions()[0],null!==this.type&&(o.type="0.9"===e?t[this.type]:this.type),n=0;n<s.length;n+=1)null!==this[r=s[n]]&&(o[r]=this[r]);for(n=0;n<a.length;n+=1)if(null!==this[r=a[n]])for(o[r]=[],i=0;i<this[r].length;i+=1)o[r].push(this[r][i].asVersion(e));return 0!==e.indexOf("0.9")&&null!==this.moreInfo&&(o.moreInfo=this.moreInfo),o},getLangDictionaryValue:u.Utils.getLangDictionaryValue},e.fromJSON=function(t){e.prototype.log("fromJSON");var n=JSON.parse(t);return new e(n)}}(),function(){"use strict";var t=u.Activity=function(t){this.log("constructor"),this.objectType="Activity",this.id=null,this.definition=null,this.init(t)};t.prototype={LOG_SRC:"Activity",log:u.prototype.log,init:function(t){this.log("init");var e,n=["id"];for((t=t||{}).hasOwnProperty("definition")&&(t.definition instanceof u.ActivityDefinition?this.definition=t.definition:this.definition=new u.ActivityDefinition(t.definition)),e=0;e<n.length;e+=1)t.hasOwnProperty(n[e])&&null!==t[n[e]]&&(this[n[e]]=t[n[e]])},toString:function(t){this.log("toString");var e="";return null!==this.definition&&""!==(e=this.definition.toString(t))?e:null!==this.id?this.id:"Activity: unidentified"},asVersion:function(t){this.log("asVersion");var e={id:this.id,objectType:this.objectType};return t=t||u.versions()[0],null!==this.definition&&(e.definition=this.definition.asVersion(t)),e}},t.fromJSON=function(e){t.prototype.log("fromJSON");var n=JSON.parse(e);return new t(n)}}(),function(){"use strict";var t=u.ContextActivities=function(t){this.log("constructor"),this.category=null,this.parent=null,this.grouping=null,this.other=null,this.init(t)};t.prototype={LOG_SRC:"ContextActivities",log:u.prototype.log,init:function(t){this.log("init");var e,n,i,r,o=["category","parent","grouping","other"];for(t=t||{},e=0;e<o.length;e+=1)if(i=o[e],t.hasOwnProperty(i)&&null!==t[i])if("[object Array]"===Object.prototype.toString.call(t[i]))for(n=0;n<t[i].length;n+=1)this.add(i,t[i][n]);else r=t[i],this.add(i,r)},add:function(t,e){if("category"===t||"parent"===t||"grouping"===t||"other"===t)return null===this[t]&&(this[t]=[]),e instanceof u.Activity||(e="string"==typeof e?{id:e}:e,e=new u.Activity(e)),this[t].push(e),this[t].length-1},asVersion:function(t){this.log("asVersion");var e,n,i={},r=["parent","grouping","other"];for(t=t||u.versions()[0],e=0;e<r.length;e+=1)if(null!==this[r[e]]&&this[r[e]].length>0)if("0.9"===t||"0.95"===t)this[r[e]].length>1&&this.log("[warning] version does not support multiple values in: "+r[e]),i[r[e]]=this[r[e]][0].asVersion(t);else for(i[r[e]]=[],n=0;n<this[r[e]].length;n+=1)i[r[e]].push(this[r[e]][n].asVersion(t));if(null!==this.category&&this.category.length>0){if("0.9"===t||"0.95"===t)throw this.log("[error] version does not support the 'category' property: "+t),new Error(t+" does not support the 'category' property");for(i.category=[],e=0;e<this.category.length;e+=1)i.category.push(this.category[e].asVersion(t))}return i}},t.fromJSON=function(e){t.prototype.log("fromJSON");var n=JSON.parse(e);return new t(n)}}(),function(){"use strict";var t=u.Context=function(t){this.log("constructor"),this.registration=null,this.instructor=null,this.team=null,this.contextActivities=null,this.revision=null,this.platform=null,this.language=null,this.statement=null,this.extensions=null,this.init(t)};t.prototype={LOG_SRC:"Context",log:u.prototype.log,init:function(t){this.log("init");var e,n,i,r=["registration","revision","platform","language","extensions"],o=["instructor","team"];for(t=t||{},e=0;e<r.length;e+=1)n=r[e],t.hasOwnProperty(n)&&null!==t[n]&&(this[n]=t[n]);for(e=0;e<o.length;e+=1)n=o[e],t.hasOwnProperty(n)&&null!==t[n]&&(void 0!==(i=t[n]).objectType&&"Person"!==i.objectType||(i.objectType="Agent"),"Agent"!==i.objectType||i instanceof u.Agent?"Group"!==i.objectType||i instanceof u.Group||(i=new u.Group(i)):i=new u.Agent(i),this[n]=i);t.hasOwnProperty("contextActivities")&&null!==t.contextActivities&&(t.contextActivities instanceof u.ContextActivities?this.contextActivities=t.contextActivities:this.contextActivities=new u.ContextActivities(t.contextActivities)),t.hasOwnProperty("statement")&&null!==t.statement&&(t.statement instanceof u.StatementRef||t.statement instanceof u.SubStatement?this.statement=t.statement:"StatementRef"===t.statement.objectType?this.statement=new u.StatementRef(t.statement):"SubStatement"===t.statement.objectType?this.statement=new u.SubStatement(t.statement):this.log("Unable to parse statement.context.statement property."))},asVersion:function(t){this.log("asVersion");var e,n={},i=["registration","revision","platform","language","extensions"],r=["instructor","team","contextActivities","statement"];if(t=t||u.versions()[0],this.statement instanceof u.SubStatement&&"0.9"!==t&&"0.95"!==t)throw this.log("[error] version does not support SubStatements in the 'statement' property: "+t),new Error(t+" does not support SubStatements in the 'statement' property");for(e=0;e<i.length;e+=1)null!==this[i[e]]&&(n[i[e]]=this[i[e]]);for(e=0;e<r.length;e+=1)null!==this[r[e]]&&(n[r[e]]=this[r[e]].asVersion(t));return n}},t.fromJSON=function(e){t.prototype.log("fromJSON");var n=JSON.parse(e);return new t(n)}}(),function(){"use strict";var t=u.StatementRef=function(t){this.log("constructor"),this.id=null,this.init(t)};t.prototype={objectType:"StatementRef",LOG_SRC:"StatementRef",log:u.prototype.log,init:function(t){this.log("init");var e,n=["id"];for(t=t||{},e=0;e<n.length;e+=1)t.hasOwnProperty(n[e])&&null!==t[n[e]]&&(this[n[e]]=t[n[e]])},toString:function(){return this.log("toString"),this.id},asVersion:function(t){this.log("asVersion");var e={objectType:this.objectType,id:this.id};return"0.9"===t&&(e.objectType="Statement"),e}},t.fromJSON=function(e){t.prototype.log("fromJSON");var n=JSON.parse(e);return new t(n)}}(),function(){"use strict";var t=u.SubStatement=function(t){this.log("constructor"),this.actor=null,this.verb=null,this.target=null,this.result=null,this.context=null,this.timestamp=null,this.init(t)};t.prototype={objectType:"SubStatement",LOG_SRC:"SubStatement",log:u.prototype.log,init:function(t){this.log("init");var e,n=["timestamp"];for((t=t||{}).hasOwnProperty("object")&&(t.target=t.object),t.hasOwnProperty("actor")&&(void 0!==t.actor.objectType&&"Person"!==t.actor.objectType||(t.actor.objectType="Agent"),"Agent"===t.actor.objectType?t.actor instanceof u.Agent?this.actor=t.actor:this.actor=new u.Agent(t.actor):"Group"===t.actor.objectType&&(t.actor instanceof u.Group?this.actor=t.actor:this.actor=new u.Group(t.actor))),t.hasOwnProperty("verb")&&(t.verb instanceof u.Verb?this.verb=t.verb:this.verb=new u.Verb(t.verb)),t.hasOwnProperty("target")&&(t.target instanceof u.Activity||t.target instanceof u.Agent||t.target instanceof u.Group||t.target instanceof u.SubStatement||t.target instanceof u.StatementRef?this.target=t.target:(void 0===t.target.objectType&&(t.target.objectType="Activity"),"Activity"===t.target.objectType?this.target=new u.Activity(t.target):"Agent"===t.target.objectType?this.target=new u.Agent(t.target):"Group"===t.target.objectType?this.target=new u.Group(t.target):"SubStatement"===t.target.objectType?this.target=new u.SubStatement(t.target):"StatementRef"===t.target.objectType?this.target=new u.StatementRef(t.target):this.log("Unrecognized target type: "+t.target.objectType))),t.hasOwnProperty("result")&&(t.result instanceof u.Result?this.result=t.result:this.result=new u.Result(t.result)),t.hasOwnProperty("context")&&(t.context instanceof u.Context?this.context=t.context:this.context=new u.Context(t.context)),e=0;e<n.length;e+=1)t.hasOwnProperty(n[e])&&null!==t[n[e]]&&(this[n[e]]=t[n[e]])},toString:function(t){return this.log("toString"),(null!==this.actor?this.actor.toString(t):"")+" "+(null!==this.verb?this.verb.toString(t):"")+" "+(null!==this.target?this.target.toString(t):"")},asVersion:function(t){this.log("asVersion");var e,n,i=["timestamp"],r=["actor","verb","result","context"];for(e={objectType:this.objectType},t=t||u.versions()[0],n=0;n<i.length;n+=1)null!==this[i[n]]&&(e[i[n]]=this[i[n]]);for(n=0;n<r.length;n+=1)null!==this[r[n]]&&(e[r[n]]=this[r[n]].asVersion(t));return null!==this.target&&(e.object=this.target.asVersion(t)),"0.9"===t&&(e.objectType="Statement"),e}},t.fromJSON=function(e){t.prototype.log("fromJSON");var n=JSON.parse(e);return new t(n)}}(),function(){"use strict";var t=u.Statement=function(t,e){this.log("constructor"),void 0===(e="number"==typeof e?{storeOriginal:e}:e||{}).storeOriginal&&(e.storeOriginal=null),void 0===e.doStamp&&(e.doStamp=!0),this.id=null,this.actor=null,this.verb=null,this.target=null,this.result=null,this.context=null,this.timestamp=null,this.stored=null,this.authority=null,this.attachments=null,this.version=null,this.degraded=!1,this.voided=null,this.inProgress=null,this.originalJSON=null,this.init(t,e)};t.prototype={LOG_SRC:"Statement",log:u.prototype.log,init:function(t,e){this.log("init");var n,i=["id","stored","timestamp","version","inProgress","voided"];if(t=t||{},e.storeOriginal&&(this.originalJSON=JSON.stringify(t,null,e.storeOriginal)),t.hasOwnProperty("object")&&(t.target=t.object),t.hasOwnProperty("actor")&&(void 0!==t.actor.objectType&&"Person"!==t.actor.objectType||(t.actor.objectType="Agent"),"Agent"===t.actor.objectType?t.actor instanceof u.Agent?this.actor=t.actor:this.actor=new u.Agent(t.actor):"Group"===t.actor.objectType&&(t.actor instanceof u.Group?this.actor=t.actor:this.actor=new u.Group(t.actor))),t.hasOwnProperty("authority")&&(void 0!==t.authority.objectType&&"Person"!==t.authority.objectType||(t.authority.objectType="Agent"),"Agent"===t.authority.objectType?t.authority instanceof u.Agent?this.authority=t.authority:this.authority=new u.Agent(t.authority):"Group"===t.authority.objectType&&(t.actor instanceof u.Group?this.authority=t.authority:this.authority=new u.Group(t.authority))),t.hasOwnProperty("verb")&&(t.verb instanceof u.Verb?this.verb=t.verb:this.verb=new u.Verb(t.verb)),t.hasOwnProperty("target")&&(t.target instanceof u.Activity||t.target instanceof u.Agent||t.target instanceof u.Group||t.target instanceof u.SubStatement||t.target instanceof u.StatementRef?this.target=t.target:(void 0===t.target.objectType&&(t.target.objectType="Activity"),"Activity"===t.target.objectType?this.target=new u.Activity(t.target):"Agent"===t.target.objectType?this.target=new u.Agent(t.target):"Group"===t.target.objectType?this.target=new u.Group(t.target):"SubStatement"===t.target.objectType?this.target=new u.SubStatement(t.target):"StatementRef"===t.target.objectType?this.target=new u.StatementRef(t.target):this.log("Unrecognized target type: "+t.target.objectType))),t.hasOwnProperty("result")&&(t.result instanceof u.Result?this.result=t.result:this.result=new u.Result(t.result)),t.hasOwnProperty("context")&&(t.context instanceof u.Context?this.context=t.context:this.context=new u.Context(t.context)),t.hasOwnProperty("attachments")&&null!==t.attachments)for(this.attachments=[],n=0;n<t.attachments.length;n+=1)t.attachments[n]instanceof u.Attachment?this.attachments.push(t.attachments[n]):this.attachments.push(new u.Attachment(t.attachments[n]));for(n=0;n<i.length;n+=1)t.hasOwnProperty(i[n])&&null!==t[i[n]]&&(this[i[n]]=t[i[n]]);e.doStamp&&this.stamp()},toString:function(t){return this.log("toString"),(null!==this.actor?this.actor.toString(t):"")+" "+(null!==this.verb?this.verb.toString(t):"")+" "+(null!==this.target?this.target.toString(t):"")},asVersion:function(t){this.log("asVersion");var e,n={},i=["id","timestamp"],r=["actor","verb","result","context","authority"];for(t=t||u.versions()[0],e=0;e<i.length;e+=1)null!==this[i[e]]&&(n[i[e]]=this[i[e]]);for(e=0;e<r.length;e+=1)null!==this[r[e]]&&(n[r[e]]=this[r[e]].asVersion(t));if(null!==this.target&&(n.object=this.target.asVersion(t)),"0.9"!==t&&"0.95"!==t||null!==this.voided&&(n.voided=this.voided),"0.9"===t&&null!==this.inProgress&&(n.inProgress=this.inProgress),null!==this.attachments&&"0.9"!==t&&"0.95"!==t)for(n.attachments=[],e=0;e<this.attachments.length;e+=1)this.attachments[e]instanceof u.Attachment?n.attachments.push(this.attachments[e].asVersion(t)):n.attachments.push(new u.Attachment(this.attachments[e]).asVersion(t));return n},stamp:function(){this.log("stamp"),null===this.id&&(this.id=u.Utils.getUUID()),null===this.timestamp&&(this.timestamp=u.Utils.getISODateString(new Date))},hasAttachmentWithContent:function(){var t;if(this.log("hasAttachmentWithContent"),null===this.attachments)return!1;for(t=0;t<this.attachments.length;t+=1)if(null!==this.attachments[t].content)return!0;return!1}},t.fromJSON=function(e){t.prototype.log("fromJSON");var n=JSON.parse(e);return new t(n)}}(),function(){"use strict";var t=u.StatementsResult=function(t){this.log("constructor"),this.statements=null,this.more=null,this.init(t)};t.prototype={LOG_SRC:"StatementsResult",log:u.prototype.log,init:function(t){this.log("init"),(t=t||{}).hasOwnProperty("statements")&&(this.statements=t.statements),t.hasOwnProperty("more")&&(this.more=t.more)}},t.fromJSON=function(e){t.prototype.log("fromJSON");var n,i,r,o=[];try{n=JSON.parse(e)}catch(s){t.prototype.log("fromJSON - JSON.parse error: "+s)}if(n){for(r=0;r<n.statements.length;r+=1){try{i=new u.Statement(n.statements[r],4)}catch(a){t.prototype.log("fromJSON - statement instantiation failed: "+a+" ("+JSON.stringify(n.statements[r])+")"),i=new u.Statement({id:n.statements[r].id},4)}o.push(i)}n.statements=o}return new t(n)}}(),function(){"use strict";var t=u.State=function(t){this.log("constructor"),this.id=null,this.updated=null,this.contents=null,this.etag=null,this.contentType=null,this.init(t)};t.prototype={LOG_SRC:"State",log:u.prototype.log,init:function(t){this.log("init");var e,n=["id","contents","etag","contentType"];for(t=t||{},e=0;e<n.length;e+=1)t.hasOwnProperty(n[e])&&null!==t[n[e]]&&(this[n[e]]=t[n[e]]);this.updated=!1}},t.fromJSON=function(e){t.prototype.log("fromJSON");var n=JSON.parse(e);return new t(n)}}(),function(){"use strict";var t=u.ActivityProfile=function(t){this.log("constructor"),this.id=null,this.activity=null,this.updated=null,this.contents=null,this.etag=null,this.contentType=null,this.init(t)};t.prototype={LOG_SRC:"ActivityProfile",log:u.prototype.log,init:function(t){this.log("init");var e,n=["id","contents","etag","contentType"];for((t=t||{}).hasOwnProperty("activity")&&(t.activity instanceof u.Activity?this.activity=t.activity:this.activity=new u.Activity(t.activity)),e=0;e<n.length;e+=1)t.hasOwnProperty(n[e])&&null!==t[n[e]]&&(this[n[e]]=t[n[e]]);this.updated=!1}},t.fromJSON=function(e){t.prototype.log("fromJSON");var n=JSON.parse(e);return new t(n)}}(),function(){"use strict";var t=u.AgentProfile=function(t){this.log("constructor"),this.id=null,this.agent=null,this.updated=null,this.contents=null,this.etag=null,this.contentType=null,this.init(t)};t.prototype={LOG_SRC:"AgentProfile",log:u.prototype.log,init:function(t){this.log("init");var e,n=["id","contents","etag","contentType"];for((t=t||{}).hasOwnProperty("agent")&&(t.agent instanceof u.Agent?this.agent=t.agent:this.agent=new u.Agent(t.agent)),e=0;e<n.length;e+=1)t.hasOwnProperty(n[e])&&null!==t[n[e]]&&(this[n[e]]=t[n[e]]);this.updated=!1}},t.fromJSON=function(e){t.prototype.log("fromJSON");var n=JSON.parse(e);return new t(n)}}(),function(){"use strict";var t=u.About=function(t){this.log("constructor"),this.version=null,this.init(t)};t.prototype={LOG_SRC:"About",log:u.prototype.log,init:function(t){this.log("init");var e,n=["version"];for(t=t||{},e=0;e<n.length;e+=1)t.hasOwnProperty(n[e])&&null!==t[n[e]]&&(this[n[e]]=t[n[e]])}},t.fromJSON=function(e){t.prototype.log("fromJSON");var n=JSON.parse(e);return new t(n)}}(),function(){"use strict";var t=u.Attachment=function(t){this.log("constructor"),this.usageType=null,this.display=null,this.contentType=null,this.length=null,this.sha2=null,this.description=null,this.fileUrl=null,this.content=null,this.init(t)};t.prototype={LOG_SRC:"Attachment",log:u.prototype.log,init:function(t){this.log("init");var e,n=["contentType","length","sha2","usageType","display","description","fileUrl"];for(t=t||{},e=0;e<n.length;e+=1)t.hasOwnProperty(n[e])&&null!==t[n[e]]&&(this[n[e]]=t[n[e]]);t.hasOwnProperty("content")&&null!==t.content&&("string"==typeof t.content?this.setContentFromString(t.content):this.setContent(t.content))},asVersion:function(t){var e;return this.log("asVersion"),"0.9"===(t=t||u.versions()[0])||"0.95"===t?e=null:(e={contentType:this.contentType,display:this.display,length:this.length,sha2:this.sha2,usageType:this.usageType},null!==this.fileUrl&&(e.fileUrl=this.fileUrl),null!==this.description&&(e.description=this.description)),e},getLangDictionaryValue:u.Utils.getLangDictionaryValue,setContent:function(t){this.content=t,this.length=t.byteLength,this.sha2=u.Utils.getSHA256String(t)},setContentFromString:function(t){var e;e=u.Utils.stringToArrayBuffer(t),this.setContent(e)},getContentAsString:function(){return u.Utils.stringFromArrayBuffer(this.content)}},t.fromJSON=function(e){t.prototype.log("fromJSON");var n=JSON.parse(e);return new t(n)},t._defaultEncoding="utf-8"}(),function(){"use strict";var t,i,r,o="Environment.Node",s=u.prototype.log,a=n("s4NR"),l=n("VzHR");t=function(t,e){s("requestComplete - xhr.status: "+t.status,o),s("requestComplete - xhr.responseText: "+t.responseText,o);var n,i=t.status,r=e.ignore404&&404===i;return i>=200&&i<400||r?e.callback?void e.callback(null,t):n={err:null,xhr:t}:(n={err:i,xhr:t},s(0===i?"[warning] There was a problem communicating with the Learning Record Store. Aborted, offline, or invalid CORS endpoint ("+i+")":"[warning] There was a problem communicating with the Learning Record Store. ("+i+" | "+t.responseText+")",o),e.callback&&e.callback(i,t),n)},u.LRS.prototype._initByEnvironment=function(){},u.LRS.prototype._makeRequest=function(e,n,i){s("_makeRequest using http/https",o);var r,c,h=e,u=void 0!==i.callback;for(c in void 0!==i.params&&Object.keys(i.params).length>0&&(h+="?"+a.stringify(i.params)),(r=new l).open(i.method,h,u),i.expectMultipart&&(r.responseType="arraybuffer"),n)n.hasOwnProperty(c)&&r.setRequestHeader(c,n[c]);return void 0!==i.data&&(i.data+=""),u&&(r.onreadystatechange=function(){s("xhr.onreadystatechange - xhr.readyState: "+r.readyState,o),4===r.readyState&&t(r,i)}),r.send(i.data),u?r:t(r,i)},u.LRS.syncEnabled=!1,u.LRS.prototype._getMultipartRequestData=function(t,n,o){var s,a=[];for(a.push(i(t,n)),s=0;s<o.length;s+=1)null!==o[s].content&&a.push(r(t,o[s].content,o[s].sha2,o[s].contentType));return void 0===e.from?a.push(new e("\r\n--"+t+"--\r\n")):a.push(e.from("\r\n--"+t+"--\r\n")),e.concat(a)},i=function(t,n){var i=["--"+t,"Content-Type: application/json","",JSON.stringify(n)].join("\r\n");return i+="\r\n",void 0===e.from?new e(i):e.from(i)},r=function(t,n,i,r){var o=[],s=["--"+t,"Content-Type: "+r,"Content-Transfer-Encoding: binary","X-Experience-API-Hash: "+i].join("\r\n");return s+="\r\n\r\n",void 0===e.from?(o.push(new e(s)),o.push(new e(n))):(o.push(e.from(s)),o.push(e.from(n))),e.concat(o)},u.Utils.stringToArrayBuffer=function(t,n){var i,r,o,s;if(n||(n=u.Utils.defaultEncoding),void 0===e.from){for(i=new e(t,n),r=new ArrayBuffer(i.length),o=new Uint8Array(r),s=0;s<i.length;s+=1)o[s]=i[s];return r}return(r=(i=e.from(t,n)).buffer).slice(i.byteOffset,i.byteOffset+i.byteLength)},u.Utils.stringFromArrayBuffer=function(t,n){var i,r,o;if(n||(n=u.Utils.defaultEncoding),void 0===e.from)for(i=new e(t.byteLength),r=new Uint8Array(t),o=0;o<i.length;o+=1)i[o]=r[o];else i=e.from(t);return i.toString(n)}}()}).call(this,n("HDXh").Buffer)}}]);
//# sourceMappingURL=eac09b87-57c754492783d35938c1.js.map